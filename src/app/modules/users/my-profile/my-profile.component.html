<div class="profile-page" *ngIf="user">

  <!-- COVER -->
  <div class="cover"></div>

  <!-- MAIN CARD -->
  <div class="profile-card">

    <!-- HEADER -->
    <div class="profile-header">

      <div class="avatar-wrapper" (click)="fileInput.click()">
        <img
          class="avatar"
          [src]="user.profileImageUrl || 'DProfile.png'"
          alt="Profile" />

        <div class="avatar-overlay">
          ðŸ“· Change photo
        </div>
      </div>

      <input
        type="file"
        #fileInput
        hidden
        accept="image/*"
        (change)="onImageSelected($event)" />

      <div class="header-info">
        <h2>{{ user.fullName }}</h2>
        <p class="location">
          {{ user.city }} {{ user.region ? 'â€¢ ' + user.region : '' }}
        </p>
        <span class="views">
          Views: {{ user.views }} profile views
        </span>
      </div>
    </div>

    <!-- CROP MODAL -->
    <div class="crop-modal" *ngIf="showCropper">
      <div class="crop-card">

        <image-cropper
          [imageChangedEvent]="imageChangedEvent"
          [maintainAspectRatio]="true"
          [aspectRatio]="1"
          [roundCropper]="true"
          format="png"
          (imageCropped)="imageCropped($event)">
        </image-cropper>

        <div class="crop-actions">
          <button class="btn outline" (click)="cancelCrop()">Cancel</button>
          <button class="btn primary" (click)="saveCroppedImage()">Save</button>
        </div>

      </div>
    </div>


    <!-- ABOUT -->
    <section class="section" *ngIf="user.bio">
      <h3>About</h3>
      <p class="bio">{{ user.bio }}</p>
    </section>

    <!-- CONTACT -->
    <section class="section">
      <h3>Contact Info</h3>
      <p><strong>Email:</strong> {{ user.email }}</p>
    </section>

  <!-- SKILLS -->
    <section class="section" *ngIf="user.programmingLanguages?.length">
      <h3>Skills</h3>
      <div class="tags">
        <span *ngFor="let skill of user.programmingLanguages">
          {{ skill }}
        </span>
      </div>
    </section>

    <!-- CV -->
    <section class="section" *ngIf="user.cvUrl">
      <a class="btn primary"
         [href]="user.cvUrl"
         target="_blank">
        ðŸ“„ View CV
      </a>
    </section>

    <!-- COMPANY (Employer) -->
    <section class="section"
             *ngIf="isEmployer">
      <h3>Company</h3>

      <div class="company-card">
        <img
          [src]="user.companyLogoUrl || 'DCompany.jpg'"
          class="company-logo" />

        <div>
          <p class="company-name">{{ user.companyName }}</p>
          <p class="company-desc">{{ user.companyDescription }}</p>
        </div>
      </div>
    </section>

  </div>
</div>
